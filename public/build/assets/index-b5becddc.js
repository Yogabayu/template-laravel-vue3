import{m as _}from"./axios-801aee4d.js";import{C as T,ai as F,D as N,aK as B,aj as D,aw as R,aL as $,ak as L,E as j,ag as E,H as M,ah as U,_ as I,$ as K,am as z,aM as A,an as G,ax as H,aN as q,ao as J,P as O,a as e,o as n,c as k,w as a,e as V,d as Q,V as h,k as m,a5 as W,j as y,l as X,F as Y,f as Z,b as c,t as v}from"./main-4316d332.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as S,c as ae,b as te,a as se,e as le}from"./VCard-cf46fd4a.js";import{V as oe}from"./VForm-c46b2397.js";import{V as x}from"./VContainer-4ac5749b.js";import{V as g,a as r}from"./VRow-eb826093.js";import{V as re}from"./VTextField-95130b1a.js";import{V as ie}from"./VSelect-85143c75.js";import"./VAvatar-0cb1f017.js";import"./VImg-e15001d4.js";import"./VCounter-4d22d3a6.js";import"./index-8534028c.js";import"./VMenu-b4cdf631.js";import"./VDivider-0f26b4cc.js";import"./VOverlay-3be57866.js";import"./dialog-transition-a7cf9aee.js";import"./VCheckboxBtn-719b3c34.js";import"./VChip-d20ac04e.js";const ne=T({color:String,...F(),...N(),...B(),...D(),...R(),...$(),...L(),...j(),...E()},"v-sheet"),C=M()({name:"VSheet",props:ne(),setup(t,s){let{slots:i}=s;const{themeClasses:u}=U(t),{backgroundColorClasses:l,backgroundColorStyles:d}=I(K(t,"color")),{borderClasses:o}=z(t),{dimensionStyles:p}=A(t),{elevationClasses:f}=G(t),{locationStyles:b}=H(t),{positionClasses:w}=q(t),{roundedClasses:P}=J(t);return O(()=>e(t.tag,{class:["v-sheet",u.value,l.value,o.value,f.value,w.value,P.value,t.class],style:[d.value,p.value,b.value,t.style]},i)),{}}}),ce={data(){return{items:null,categories:null,selectedCategory:null,selectedName:null}},methods:{toDetail(t){this.$router.push(`/u-filedetail/${t}`)},searchFile(){this.getFileSearch(this.selectedName,this.selectedCategory)},async favorite(t){try{const s=await _.get(`/user/setfavfile/${t}`);s.status===200?(this.getFileSearch(),this.$showToast("success","Success",s.data.message)):(this.getFileSearch(),this.$showToast("error","Sorry",s.data.message))}catch(s){this.$showToast("error","Sorry",s.response.data.message)}},async getFileSearch(t=null,s=null){try{let i="/user/search?";t!==null&&(i+=`name=${t}`),s!==null&&(i+=(t!==null?"&":"")+`category=${s}`);const u=await _.get(i);u.status===200?this.items=u.data.data:this.$showToast("error","Sorry",u.data.data.message)}catch(i){this.$showToast("error","Sorry",i.data.data.message)}},async getCategory(){try{const t=await _.get("/user/category");t.status===200?this.categories=t.data.data.map(s=>({value:s.id,title:s.name})):this.$showToast("error","Sorry",t.data.data.message)}catch(t){this.$showToast("error","Sorry",t.data.data.message)}}},mounted(){this.getFileSearch(),this.getCategory()}},ue=c("span",{class:"subtitle-1"},"Getting Data ...",-1),de=c("span",{class:"subtitle-1"},"Tidak ada file yang ditemukan",-1),me=c("span",{class:"caption"},"Mohon periksa kembali nama file dan kategori",-1),fe={class:"text-overline mb-1"},he={class:"text-h6 mb-1"},ge={class:"text-caption"};function pe(t,s,i,u,l,d){return n(),k("div",null,[e(S,{class:"auth-card pa-4 pt-5"},{default:a(()=>[e(ae,{class:"text-2xl font-weight-bold"},{default:a(()=>[V(" Cari File ")]),_:1}),e(te,null,{default:a(()=>[e(oe,{onSubmit:Q(d.searchFile,["prevent"])},{default:a(()=>[e(x,null,{default:a(()=>[e(g,{"no-gutters":""},{default:a(()=>[e(r,{cols:"12",sm:"6"},{default:a(()=>[e(C,{class:"ma-2 pa-2"},{default:a(()=>[e(re,{placeholder:"Cari File",autofocus:"",modelValue:l.selectedName,"onUpdate:modelValue":s[0]||(s[0]=o=>l.selectedName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"4"},{default:a(()=>[e(C,{class:"ma-2 pa-2"},{default:a(()=>[e(ie,{label:"Pilih Kategori",items:l.categories,modelValue:l.selectedCategory,"onUpdate:modelValue":s[1]||(s[1]=o=>l.selectedCategory=o),variant:"solo-filled"},null,8,["items","modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"2"},{default:a(()=>[e(C,{class:"ma-2 pa-2 d-flex justify-center"},{default:a(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-magnify",color:"#5865f2",type:"submit"})]),_:1})]),_:1})]),_:1}),e(x,null,{default:a(()=>[e(g,null,{default:a(()=>[l.items==null?(n(),m(r,{key:0,cols:"12",md:"12"},{default:a(()=>[e(g,{class:"text-center"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(W,{indeterminate:"",color:"primary"})]),_:1}),e(r,{cols:"12"},{default:a(()=>[ue]),_:1})]),_:1})]),_:1})):y("",!0),l.items!=null&&l.items.length==0?(n(),m(r,{key:1,cols:"12",md:"12"},{default:a(()=>[e(g,{class:"text-center"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(X,{size:"64",color:"grey lighten-2"},{default:a(()=>[V("mdi-folder-search-outline")]),_:1})]),_:1}),e(r,{cols:"12"},{default:a(()=>[de]),_:1}),e(r,{cols:"12"},{default:a(()=>[me]),_:1})]),_:1})]),_:1})):y("",!0),l.items!=null&&l.items.length>0?(n(!0),k(Y,{key:2},Z(l.items,(o,p)=>(n(),m(r,{key:p,cols:"12",md:"6"},{default:a(()=>[e(S,{class:"mx-auto",color:"primary",variant:"tonal"},{default:a(()=>[e(se,null,{default:a(()=>[c("div",null,[c("div",fe,v(o.file.author.name),1),c("div",he,v(o.file.name),1),c("div",ge,v(o.file.summary.substring(0,70)+"..."),1)])]),_:2},1024),e(le,{class:"d-flex justify-end"},{default:a(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-open-in-new",color:"blue-lighten-2",onClick:f=>d.toDetail(o.file.id)},null,8,["onClick"]),o.file.favorite?(n(),m(h,{key:0,class:"ma-2",variant:"text",icon:"mdi-heart",color:"blue-lighten-2",onClick:f=>d.favorite(o.file.id)},null,8,["onClick"])):(n(),m(h,{key:1,class:"ma-2",variant:"text",icon:"mdi-heart-outline",color:"blue-lighten-2",onClick:f=>d.favorite(o.file.id)},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}const je=ee(ce,[["render",pe]]);export{je as default};
