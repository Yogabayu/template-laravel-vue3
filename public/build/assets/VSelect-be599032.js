import{m as Q,V as O}from"./VTextField-0f18f25f.js";import{f as X}from"./index-d44c594b.js";import{bE as M,bF as Z,ct as ee,bS as le,bJ as ae,c4 as ne,i as L,bW as R,m as w,b2 as te,bP as oe,a as o,F as S,au as b,l as E,co as ue,e as se,c3 as ie}from"./main-d206bd32.js";import{m as re,e as ce,V as de,a as fe,b as _}from"./VMenu-493147e1.js";import{m as ve}from"./VImg-d26d8ca5.js";import{e as me}from"./VCounter-fe257db8.js";import{V as pe}from"./dialog-transition-fd0c8240.js";import{V as he}from"./VCheckboxBtn-6bdaaf46.js";import{V as ye}from"./VChip-ecdcfd35.js";const Ve=M({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Z,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:ee},...re({itemChildren:!1})},"select"),Ce=M({...Ve(),...le(Q({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ve({transition:{component:pe}})},"v-select"),Le=ae()({name:"VSelect",props:Ce(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,K){let{slots:a}=K;const{t:U}=ne(),P=L(),T=L(),D=R(e,"menu"),f=w({get:()=>D.value,set:l=>{var t;D.value&&!l&&((t=T.value)!=null&&t.Î¨openChildren)||(D.value=l)}}),{items:y,transformIn:N,transformOut:H}=ce(e),i=R(e,"modelValue",[],l=>N(ie(l)),l=>{const t=H(l);return e.multiple?t:t[0]??null}),m=me(),V=w(()=>i.value.map(l=>y.value.find(t=>e.valueComparator(t.value,l.value))||l)),B=w(()=>V.value.map(l=>l.props.value)),p=te(!1);let x="",A;const I=w(()=>e.hideSelected?y.value.filter(l=>!V.value.some(t=>t===l)):y.value),h=L();function $(l){e.openOnClear&&(f.value=!0)}function j(){e.hideNoData&&!y.value.length||e.readonly||m!=null&&m.isReadonly.value||(f.value=!f.value)}function z(l){var n,r,c,u;if(e.readonly||m!=null&&m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(f.value=!0),["Escape","Tab"].includes(l.key)&&(f.value=!1),l.key==="ArrowDown"?(n=h.value)==null||n.focus("next"):l.key==="ArrowUp"?(r=h.value)==null||r.focus("prev"):l.key==="Home"?(c=h.value)==null||c.focus("first"):l.key==="End"&&((u=h.value)==null||u.focus("last"));const t=1e3;function v(d){const s=d.key.length===1,g=!d.ctrlKey&&!d.metaKey&&!d.altKey;return s&&g}if(e.multiple||!v(l))return;const C=performance.now();C-A>t&&(x=""),x+=l.key.toLowerCase(),A=C;const k=y.value.find(d=>d.title.toLowerCase().startsWith(x));k!==void 0&&(i.value=[k])}function F(l){if(e.multiple){const t=B.value.findIndex(v=>e.valueComparator(v,l.value));if(t===-1)i.value=[...i.value,l];else{const v=[...i.value];v.splice(t,1),i.value=v}}else i.value=[l],f.value=!1}function W(l){var t;(t=h.value)!=null&&t.$el.contains(l.relatedTarget)||(f.value=!1)}function q(){var l;p.value&&((l=P.value)==null||l.focus())}function J(l){p.value=!0}return oe(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||I.value.length||a.prepend||a.append||a["no-data"]),v=i.value.length>0,[C]=O.filterProps(e),k=v||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return o(O,b({ref:P},C,{modelValue:i.value.map(n=>n.props.value).join(", "),"onUpdate:modelValue":n=>{n==null&&(i.value=[])},focused:p.value,"onUpdate:focused":n=>p.value=n,validationValue:i.externalValue,dirty:v,class:["v-select",{"v-select--active-menu":f.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,readonly:!0,placeholder:k,"onClick:clear":$,"onMousedown:control":j,onBlur:W,onKeydown:z}),{...a,default:()=>o(S,null,[o(de,b({ref:T,modelValue:f.value,"onUpdate:modelValue":n=>f.value=n,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:q},e.menuProps),{default:()=>[t&&o(fe,{ref:h,selected:B.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusin:J},{default:()=>{var n,r,c;return[!I.value.length&&!e.hideNoData&&(((n=a["no-data"])==null?void 0:n.call(a))??o(_,{title:U(e.noDataText)},null)),(r=a["prepend-item"])==null?void 0:r.call(a),I.value.map((u,d)=>{var g;const s=b(u.props,{key:d,onClick:()=>F(u)});return((g=a.item)==null?void 0:g.call(a,{item:u,index:d,props:s}))??o(_,s,{prepend:Y=>{let{isSelected:G}=Y;return o(S,null,[e.multiple&&!e.hideSelected?o(he,{key:u.value,modelValue:G,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependIcon&&o(E,{icon:u.props.prependIcon},null)])}})}),(c=a["append-item"])==null?void 0:c.call(a)]}})]}),V.value.map((n,r)=>{var d;function c(s){s.stopPropagation(),s.preventDefault(),F(n)}const u={"onClick:close":c,onMousedown(s){s.preventDefault(),s.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:n.value,class:"v-select__selection"},[l?a.chip?o(ue,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>{var s;return[(s=a.chip)==null?void 0:s.call(a,{item:n,index:r,props:u})]}}):o(ye,b({key:"chip",closable:e.closableChips,size:"small",text:n.title},u),null):((d=a.selection)==null?void 0:d.call(a,{item:n,index:r}))??o("span",{class:"v-select__selection-text"},[n.title,e.multiple&&r<V.value.length-1&&o("span",{class:"v-select__selection-comma"},[se(",")])])])})]),"append-inner":function(){var u;for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return o(S,null,[(u=a["append-inner"])==null?void 0:u.call(a,...r),e.menuIcon?o(E,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),X({isFocused:p,menu:f,select:F},P)}});export{Le as V};
