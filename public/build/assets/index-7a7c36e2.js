import{m as p}from"./axios-b187c8a6.js";import{B as c,o as g,c as V,a as e,w as o,S as n,d as m,e as w,V as f}from"./main-32292bde.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{V as x,a as b,b as y}from"./VCard-8ae65319.js";import{V as F,a as u}from"./VTextField-ee555281.js";import{V as U,a as d}from"./VRow-76b6fc2f.js";import"./VAvatar-3c3d3280.js";import"./VImg-6021c12a.js";import"./forwardRefs-a29b5f65.js";import"./index-a3c59412.js";import"./easing-9f15041e.js";const P={setup(){const t=c();return{logout:()=>{localStorage.removeItem("userData"),localStorage.removeItem("userToken"),n.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:l=>{l.addEventListener("mouseenter",n.stopTimer),l.addEventListener("mouseleave",n.resumeTimer)}}).fire({icon:"success",title:"Yeay",text:"Berhasil update data silahkan login ulang"}),t.push("/login")}}},data(){return{dataForm:{name:"",email:"",password:null},isPasswordVisible:!1}},methods:{cekForm(){console.log(this.dataForm)},async updateUserProfile(){try{const t=c(),r={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")}`}},l=await p.put("/updateUserProfile",this.dataForm,r);l.status===200?(this.dataForm.password!=null&&this.logout(),this.$showToast("success","Success",l.data.message)):this.$showToast("error","Sorry",l.data.message)}catch(t){this.$showToast("error","Sorry",t.message)}},async getUserProfile(){try{const a={headers:{Authorization:`Bearer ${localStorage.getItem("userToken")}`}},r=await p.get("/userProfile",a);r.status===200?(this.dataForm.name=r.data.data.name,this.dataForm.email=r.data.data.email):this.$showToast("error","Sorry",r.data.data.message)}catch(t){this.$showToast("error","Sorry",t.data.data.message)}}},mounted(){this.getUserProfile()}};function v(t,a,r,l,s,h){return g(),V("div",null,[e(x,{class:"auth-card pa-4 pt-5"},{default:o(()=>[e(b,{class:"align-left"},{default:o(()=>[e(y,{class:"text-2xl font-weight-bold"},{default:o(()=>[m(" User Profile ")]),_:1})]),_:1}),e(F,{class:"mt-6",onSubmit:w(h.updateUserProfile,["prevent"])},{default:o(()=>[e(U,null,{default:o(()=>[e(d,{md:"6",cols:"12"},{default:o(()=>[e(u,{placeholder:"John",label:"Nama",modelValue:s.dataForm.name,"onUpdate:modelValue":a[0]||(a[0]=i=>s.dataForm.name=i),autofocus:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:o(()=>[e(u,{label:"E-mail",placeholder:"johndoe@gmail.com",type:"email",modelValue:s.dataForm.email,"onUpdate:modelValue":a[1]||(a[1]=i=>s.dataForm.email=i)},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"6"},{default:o(()=>[e(u,{modelValue:s.dataForm.password,"onUpdate:modelValue":a[2]||(a[2]=i=>s.dataForm.password=i),label:"Password",placeholder:"············",type:s.isPasswordVisible?"text":"password","append-inner-icon":s.isPasswordVisible?"bx-hide":"bx-show","onClick:appendInner":a[3]||(a[3]=i=>s.isPasswordVisible=!s.isPasswordVisible)},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:o(()=>[e(f,{type:"submit"},{default:o(()=>[m("Update changes")]),_:1}),e(f,{color:"secondary",variant:"tonal",type:"reset"},{default:o(()=>[m(" Reset ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})])}const A=T(P,[["render",v]]);export{A as default};
