import{m}from"./axios-42ffa80f.js";import{r as _,o as x,c as D,a as s,w as t,e as d,b as i,V as c,d as f,y as V}from"./main-fe8c19d8.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import{V as h,a as T,e as S,c as b,d as u}from"./VRow-6249aab9.js";import{a as p,V as w}from"./VTextField-9bcc7120.js";import{V as v}from"./VDialog-59b62c44.js";import"./index-12d54a3b.js";import"./VImg-427b7462.js";import"./VOverlay-6dce3d08.js";const C={data(){return{rules:{required:a=>!!a||"Required"},dataForm:{id:null,name:""},items:[],headers:[{text:"Nama Divisi",value:"name",sortable:!0},{text:"Total Karyawan",value:"users_count",sortable:!0},{text:"Operation",value:"operation"}],searchValue:"",searchField:["name","users_count"],insert:!1,edit:!1}},methods:{async deleteUser(a){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data?"))return;const r=await m.delete(`/division/${a.id}`);r.status===200?(this.getAllDivisions(),this.$showToast("success","Berhasil",r.data.message)):this.$showToast("error","Sorry",r.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},async updateData(){try{const a=new FormData;a.append("name",this.dataForm.name),a.append("_method","PUT");const e=await m.post(`/division/${this.dataForm.id}`,a);e.status===200?(this.closeModal(2),this.getAllDivisions(),this.$showToast("success","Success",e.data.message)):this.$showToast("error","Sorry",e.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},async insertData(){try{for(let r in this.dataForm)r!=="id"&&this.dataForm[r]===null&&(this.closeModal(1),this.$showToast("error","Sorry",`Properti ${r} harus diisi.`));const a=new FormData;a.append("name",this.dataForm.name),a.append("_method","POST");const e=await m.post("/division",a);e.status===200?(this.closeModal(1),this.getAllDivisions(),this.$showToast("success","Success",e.data.message)):this.$showToast("error","Sorry",e.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},closeModal(a){a===1?(this.resetForm(),this.insert=!1):a===2&&(this.resetForm(),this.edit=!1)},resetForm(){this.dataForm={name:"",id:null}},openModal(a,e=null){a===1?this.insert=!0:a===2&&e&&(this.dataForm.name=e.name,this.dataForm.id=e.id,this.edit=!0)},async getAllDivisions(){try{const a=await m.get("/division");a.status===200?this.items=a.data.data:this.$showToast("error","Sorry",a.data.data.message)}catch(a){this.$showToast("error","Sorry",a.data.data.message)}}},mounted(){this.getAllDivisions()}},k={class:"d-flex justify-space-between mb-6"},M={class:"d-flex align-center pe-2 w-25"},U=i("p",null,"loading data .....",-1),A={class:"operation-wrapper"};function N(a,e,r,B,o,n){const y=_("EasyDataTable");return x(),D("div",null,[s(h,{class:"auth-card pa-4 pt-5"},{default:t(()=>[s(T,{class:"align-left"},{default:t(()=>[s(S,{class:"text-2xl font-weight-bold"},{default:t(()=>[d(" Daftar Posisi ")]),_:1})]),_:1}),i("div",k,[s(c,{color:"primary",size:"small",class:"my-3 mx-3",onClick:e[0]||(e[0]=l=>n.openModal(1))},{default:t(()=>[d(" Tambah Data ")]),_:1}),i("div",M,[s(p,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:o.searchValue,"onUpdate:modelValue":e[1]||(e[1]=l=>o.searchValue=l)},null,8,["modelValue"])])]),s(v,{modelValue:o.insert,"onUpdate:modelValue":e[4]||(e[4]=l=>o.insert=l),width:"auto"},{default:t(()=>[s(h,null,{title:t(()=>[d(" Tambah Data ")]),text:t(()=>[s(w,{onSubmit:f(n.insertData,["prevent"])},{default:t(()=>[s(b,null,{default:t(()=>[s(u,{md:"12",cols:"12"},{default:t(()=>[s(p,{placeholder:"Nama Divisi",label:"Nama",modelValue:o.dataForm.name,"onUpdate:modelValue":e[2]||(e[2]=l=>o.dataForm.name=l),autofocus:"",rules:[o.rules.required],"prepend-icon":"mdi-devide"},null,8,["modelValue","rules"])]),_:1}),s(u,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[s(c,{type:"submit"},{default:t(()=>[d("Simpan")]),_:1}),i("button",{type:"button",class:"btn btn-blue",onClick:e[3]||(e[3]=l=>n.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),s(v,{modelValue:o.edit,"onUpdate:modelValue":e[7]||(e[7]=l=>o.edit=l),width:"auto"},{default:t(()=>[s(h,null,{title:t(()=>[d(" Update Data ")]),text:t(()=>[s(w,{onSubmit:f(n.updateData,["prevent"])},{default:t(()=>[s(b,null,{default:t(()=>[s(u,{md:"12",cols:"12"},{default:t(()=>[s(p,{placeholder:"Nama Divisi",label:"Nama",modelValue:o.dataForm.name,"onUpdate:modelValue":e[5]||(e[5]=l=>o.dataForm.name=l),autofocus:"",rules:[o.rules.required],"prepend-icon":"mdi-devide"},null,8,["modelValue","rules"])]),_:1}),s(u,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[s(c,{type:"submit"},{default:t(()=>[d("Simpan")]),_:1}),i("button",{type:"button",class:"btn btn-blue",onClick:e[6]||(e[6]=l=>n.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),s(y,{"show-index":"",headers:o.headers,items:o.items,"search-field":o.searchField,"search-value":o.searchValue},{loading:t(()=>[U]),"item-operation":t(l=>[i("div",A,[i("button",null,[s(V,{size:"20",icon:"bx-edit",color:"blue",onClick:g=>n.openModal(2,l)},null,8,["onClick"])]),d(" Â  "),i("button",null,[s(V,{size:"20",icon:"bx-trash",color:"red",onClick:g=>n.deleteUser(l)},null,8,["onClick"])])])]),_:1},8,["headers","items","search-field","search-value"])]),_:1})])}const L=F(C,[["render",N]]);export{L as default};
