import{m as _}from"./axios-bee2a5fc.js";import{bE as T,c9 as F,bG as B,cp as N,ca as D,cl as R,cq as $,cb as E,bH as L,c7 as j,bJ as U,c8 as G,bY as I,b9 as M,cd as q,cr as z,ce as A,cm as H,cs as J,cf as K,bP as Y,a as e,o as n,c as V,w as t,e as k,d as O,V as h,k as m,c0 as Q,j as y,l as W,F as X,f as Z,b as c,t as v}from"./main-b326c27b.js";import{_ as ee}from"./_plugin-vue_export-helper-c27b6911.js";import{V as b,c as te,b as se,a as ae,e as le}from"./VCard-fbcb8847.js";import{V as oe}from"./VForm-c73d23b3.js";import{V as S}from"./VContainer-907bf2ea.js";import{V as g,a as r}from"./VRow-a2aefdee.js";import{V as re}from"./VTextField-1d5e4087.js";import{V as ie}from"./VSelect-9fb47c37.js";import"./VAvatar-7107efed.js";import"./VImg-526a941c.js";import"./VCounter-fc50680f.js";import"./index-480335d0.js";import"./VMenu-0d3d0e4a.js";import"./VDivider-0f7bd833.js";import"./VOverlay-28ad8756.js";import"./dialog-transition-8696ab90.js";import"./VCheckboxBtn-ebc1f5e5.js";import"./VChip-52e828f2.js";const ne=T({color:String,...F(),...B(),...N(),...D(),...R(),...$(),...E(),...L(),...j()},"v-sheet"),C=U()({name:"VSheet",props:ne(),setup(s,a){let{slots:i}=a;const{themeClasses:u}=G(s),{backgroundColorClasses:l,backgroundColorStyles:d}=I(M(s,"color")),{borderClasses:o}=q(s),{dimensionStyles:p}=z(s),{elevationClasses:f}=A(s),{locationStyles:x}=H(s),{positionClasses:w}=J(s),{roundedClasses:P}=K(s);return Y(()=>e(s.tag,{class:["v-sheet",u.value,l.value,o.value,f.value,w.value,P.value,s.class],style:[d.value,p.value,x.value,s.style]},i)),{}}}),ce={data(){return{items:null,categories:null,selectedCategory:null,selectedName:null}},methods:{toDetail(s){this.$router.push(`/u-filedetail/${s}`)},searchFile(){this.getFileSearch(this.selectedName,this.selectedCategory)},async favorite(s){try{const a=await _.get(`/user/setfavfile/${s}`);a.status===200?(this.getFileSearch(),this.$showToast("success","Success",a.data.message)):(this.getFileSearch(),this.$showToast("error","Sorry",a.data.message))}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},async getFileSearch(s=null,a=null){try{let i="/user/search?";s!==null&&(i+=`name=${s}`),a!==null&&(i+=(s!==null?"&":"")+`category=${a}`);const u=await _.get(i);u.status===200?this.items=u.data.data:this.$showToast("error","Sorry",u.data.data.message)}catch(i){this.$showToast("error","Sorry",i.data.data.message)}},async getCategory(){try{const s=await _.get("/user/category");s.status===200?this.categories=s.data.data.map(a=>({value:a.id,title:a.name})):this.$showToast("error","Sorry",s.data.data.message)}catch(s){this.$showToast("error","Sorry",s.data.data.message)}}},mounted(){this.getFileSearch(),this.getCategory()}},ue=c("span",{class:"subtitle-1"},"Getting Data ...",-1),de=c("span",{class:"subtitle-1"},"Tidak ada file yang ditemukan",-1),me=c("span",{class:"caption"},"Mohon periksa kembali nama file dan kategori",-1),fe={class:"text-overline mb-1"},he={class:"text-h6 mb-1"},ge={class:"text-caption"};function pe(s,a,i,u,l,d){return n(),V("div",null,[e(b,{class:"auth-card pa-4 pt-5"},{default:t(()=>[e(te,{class:"text-2xl font-weight-bold"},{default:t(()=>[k(" Cari File ")]),_:1}),e(se,null,{default:t(()=>[e(oe,{onSubmit:O(d.searchFile,["prevent"])},{default:t(()=>[e(S,null,{default:t(()=>[e(g,{"no-gutters":""},{default:t(()=>[e(r,{cols:"12",sm:"6"},{default:t(()=>[e(C,{class:"ma-2 pa-2"},{default:t(()=>[e(re,{placeholder:"Cari File",autofocus:"",modelValue:l.selectedName,"onUpdate:modelValue":a[0]||(a[0]=o=>l.selectedName=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"4"},{default:t(()=>[e(C,{class:"ma-2 pa-2"},{default:t(()=>[e(ie,{label:"Pilih Kategori",items:l.categories,modelValue:l.selectedCategory,"onUpdate:modelValue":a[1]||(a[1]=o=>l.selectedCategory=o),variant:"solo-filled"},null,8,["items","modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"2"},{default:t(()=>[e(C,{class:"ma-2 pa-2 d-flex justify-center"},{default:t(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-magnify",color:"#5865f2",type:"submit"})]),_:1})]),_:1})]),_:1}),e(S,null,{default:t(()=>[e(g,null,{default:t(()=>[l.items==null?(n(),m(r,{key:0,cols:"12",md:"12"},{default:t(()=>[e(g,{class:"text-center"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(Q,{indeterminate:"",color:"primary"})]),_:1}),e(r,{cols:"12"},{default:t(()=>[ue]),_:1})]),_:1})]),_:1})):y("",!0),l.items!=null&&l.items.length==0?(n(),m(r,{key:1,cols:"12",md:"12"},{default:t(()=>[e(g,{class:"text-center"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(W,{size:"64",color:"grey lighten-2"},{default:t(()=>[k("mdi-folder-search-outline")]),_:1})]),_:1}),e(r,{cols:"12"},{default:t(()=>[de]),_:1}),e(r,{cols:"12"},{default:t(()=>[me]),_:1})]),_:1})]),_:1})):y("",!0),l.items!=null&&l.items.length>0?(n(!0),V(X,{key:2},Z(l.items,(o,p)=>(n(),m(r,{key:p,cols:"12",md:"6"},{default:t(()=>[e(b,{class:"mx-auto",color:"primary",variant:"tonal"},{default:t(()=>[e(ae,null,{default:t(()=>[c("div",null,[c("div",fe,v(o.file.author.name),1),c("div",he,v(o.file.name),1),c("div",ge,v(o.file.summary.substring(0,70)+"..."),1)])]),_:2},1024),e(le,{class:"d-flex justify-end"},{default:t(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-open-in-new",color:"blue-lighten-2",onClick:f=>d.toDetail(o.file.id)},null,8,["onClick"]),o.file.favorite?(n(),m(h,{key:0,class:"ma-2",variant:"text",icon:"mdi-heart",color:"blue-lighten-2",onClick:f=>d.favorite(o.file.id)},null,8,["onClick"])):(n(),m(h,{key:1,class:"ma-2",variant:"text",icon:"mdi-heart-outline",color:"blue-lighten-2",onClick:f=>d.favorite(o.file.id)},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}const Le=ee(ce,[["render",pe]]);export{Le as default};
