import{m as u}from"./axios-e7133cbe.js";import{r as x,o as p,c as b,a as s,w as t,e as d,b as r,V as h,d as V,F as T,f as S,k as D,t as C,aa as k,l as w}from"./main-27b5de20.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f,a as P,c as L}from"./VCard-82097527.js";import{V as g}from"./VTextField-e98259b2.js";import{V as y}from"./VDialog-06ca0577.js";import{V as v}from"./VForm-c0e688d0.js";import{V as _,a as c}from"./VRow-a01c2245.js";import{V as A}from"./VChip-1110063c.js";import"./VAvatar-b30ca024.js";import"./VImg-e2cfe0d4.js";import"./VCounter-4d809cf9.js";import"./index-3c1d4bca.js";import"./VOverlay-1a5fdbd3.js";import"./dialog-transition-9c460aef.js";const B={data(){return{rules:{required:e=>!!e||"Required"},dataForm:{id:null,name:"",level:0},items:[],headers:[{text:"Nama Jabatan",value:"name",sortable:!0},{text:"Total Karyawan",value:"users_count",sortable:!0},{text:"Operation",value:"operation"}],searchValue:"",searchField:["name","users_count"],insert:!1,edit:!1}},methods:{getChipColor(e){switch(e){case 0:return console.log("Level 0"),"rgb(255, 153, 0)";case 1:return console.log("Level 1"),"rgb(229, 43, 43)";case 2:return console.log("Level 2"),"rgb(6, 84, 107)";case 3:return console.log("Level 3"),"rgb(150, 150, 150)";case 4:return console.log("Level 4"),"rgb(0, 0, 0)";default:return console.log("Level default"),"rgb(6, 84, 107)"}},async deletePosition(e){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data?"))return;const i=await u.delete(`/position/${e.id}`);i.status===200?(this.getAllPositions(),this.$showToast("success","Berhasil",i.data.message)):this.$showToast("error","Sorry",i.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},async updateData(){try{const e=new FormData;e.append("name",this.dataForm.name),e.append("level",this.dataForm.level),e.append("_method","PUT");const a=await u.post(`/position/${this.dataForm.id}`,e);a.status===200?(this.closeModal(2),this.getAllPositions(),this.$showToast("success","Success",a.data.message)):this.$showToast("error","Sorry",a.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},async insertData(){try{for(let i in this.dataForm)i!=="id"&&this.dataForm[i]===null&&(this.closeModal(1),this.$showToast("error","Sorry",`Properti ${i} harus diisi.`));const e=new FormData;e.append("level",this.dataForm.level),e.append("name",this.dataForm.name),e.append("_method","POST");const a=await u.post("/position",e);a.status===200?(this.closeModal(1),this.getAllPositions(),this.$showToast("success","Success",a.data.message)):this.$showToast("error","Sorry",a.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},closeModal(e){e===1?(this.resetForm(),this.insert=!1):e===2&&(this.resetForm(),this.edit=!1)},resetForm(){this.dataForm={name:"",id:null,level:0}},openModal(e,a=null){e===1?this.insert=!0:e===2&&a&&(this.dataForm.level=parseInt(a.level),this.dataForm.name=a.name,this.dataForm.id=a.id,this.edit=!0)},async getAllPositions(){try{const e=await u.get("/position");e.status===200?this.items=e.data.data:this.$showToast("error","Sorry",e.data.data.message)}catch(e){this.$showToast("error","Sorry",e.data.data.message)}}},mounted(){this.getAllPositions()}},N={class:"d-flex justify-space-between mb-6"},U={class:"d-flex align-center pe-2 w-25"},J=r("p",null,"Data Jabatan Kosong",-1),q=r("p",null,"loading data .....",-1),z={class:"operation-wrapper"};function E(e,a,i,I,l,n){const F=x("EasyDataTable");return p(),b("div",null,[s(f,{class:"auth-card pa-4 pt-5"},{default:t(()=>[s(P,{class:"align-left"},{default:t(()=>[s(L,{class:"text-2xl font-weight-bold"},{default:t(()=>[d(" Daftar Jabatan ")]),_:1})]),_:1}),r("div",N,[s(h,{color:"primary",size:"small",class:"my-3 mx-3",onClick:a[0]||(a[0]=o=>n.openModal(1))},{default:t(()=>[d(" Tambah Data ")]),_:1}),r("div",U,[s(g,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:l.searchValue,"onUpdate:modelValue":a[1]||(a[1]=o=>l.searchValue=o)},null,8,["modelValue"])])]),s(y,{modelValue:l.insert,"onUpdate:modelValue":a[4]||(a[4]=o=>l.insert=o),width:"auto"},{default:t(()=>[s(f,null,{title:t(()=>[d(" Tambah Data ")]),text:t(()=>[s(v,{onSubmit:V(n.insertData,["prevent"])},{default:t(()=>[s(_,null,{default:t(()=>[s(c,{md:"12",cols:"12"},{default:t(()=>[s(g,{placeholder:"Nama Jabatan",label:"Nama",modelValue:l.dataForm.name,"onUpdate:modelValue":a[2]||(a[2]=o=>l.dataForm.name=o),autofocus:"",rules:[l.rules.required],"prepend-icon":"mdi-file"},null,8,["modelValue","rules"])]),_:1}),s(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[s(h,{type:"submit"},{default:t(()=>[d("Simpan")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[3]||(a[3]=o=>n.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),s(y,{modelValue:l.edit,"onUpdate:modelValue":a[7]||(a[7]=o=>l.edit=o),width:"auto"},{default:t(()=>[s(f,null,{title:t(()=>[d(" Update Data ")]),text:t(()=>[s(v,{onSubmit:V(n.updateData,["prevent"])},{default:t(()=>[s(_,null,{default:t(()=>[s(c,{md:"12",cols:"12"},{default:t(()=>[s(g,{placeholder:"Nama Jabatan",label:"Nama",modelValue:l.dataForm.name,"onUpdate:modelValue":a[5]||(a[5]=o=>l.dataForm.name=o),autofocus:"",rules:[l.rules.required],"prepend-icon":"mdi-file"},null,8,["modelValue","rules"])]),_:1}),s(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[s(h,{type:"submit"},{default:t(()=>[d("Simpan")]),_:1}),r("button",{type:"button",class:"btn btn-blue",onClick:a[6]||(a[6]=o=>n.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),s(F,{"show-index":"",headers:l.headers,items:l.items,"search-field":l.searchField,"search-value":l.searchValue},{"empty-message":t(()=>[J]),loading:t(()=>[q]),"item-level":t(({level:o})=>[(p(!0),b(T,null,S(o,m=>(p(),D(A,{key:m,style:k({color:n.getChipColor(m)})},{default:t(()=>[d(" Level "+C(m),1)]),_:2},1032,["style"]))),128))]),"item-operation":t(o=>[r("div",z,[r("button",null,[s(w,{size:"20",icon:"bx-edit",color:"blue",onClick:m=>n.openModal(2,o)},null,8,["onClick"])]),d(" Â  "),r("button",null,[s(w,{size:"20",icon:"bx-trash",color:"red",onClick:m=>n.deletePosition(o)},null,8,["onClick"])])])]),_:1},8,["headers","items","search-field","search-value"])]),_:1})])}const se=M(B,[["render",E]]);export{se as default};
