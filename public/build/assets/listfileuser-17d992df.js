import{m as c}from"./axios-801aee4d.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";import{V as h,a as y,c as g}from"./VCard-c487f410.js";import{r as V,o as w,c as x,a as s,w as t,b as o,l as m,e as l,t as u,W as v}from"./main-74652f26.js";import{V as b}from"./VTextField-7daa38a1.js";import{V as D}from"./VDialog-d7869922.js";import{V as T}from"./VChip-e096c7a8.js";import{V as k}from"./VTooltip-378e11e1.js";import"./VAvatar-238a9d95.js";import"./VImg-78f354d0.js";import"./VCounter-ccd3e590.js";import"./index-13e977e8.js";import"./VOverlay-3a0b480f.js";import"./dialog-transition-49317792.js";const C={data(){return{userUuid:this.$route.params.userUuid,filePath:this.$filePath,userProfile:{},detailHistory:!1,searchValue:"",items:[],headers:[{text:"Nama File",value:"name",sortable:!0},{text:"File",value:"path",sortable:!0},{text:"Terakhir dilihat",value:"latest_view",sortable:!0},{text:"Operation",value:"operation"}],itemsHistory:[],headersHistory:[{text:"File",value:"file.name",sortable:!0},{text:"Dilihat",value:"startTime",sortable:!0}]}},methods:{formatDate(i){return new Date(i).toLocaleString("id-ID")},async openModal(i){try{const e=new FormData;e.append("uuid",this.userProfile.uuid),e.append("fileid",i),e.append("_method","POST");const d=await c.post("/listhistoryfilebyuser",e);d.status===200?(this.itemsHistory=d.data.data,this.detailHistory=!0):this.$showToast("error","Sorry",d.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},goBack(){this.$router.go(-1)},async getListFile(i){try{const e=await c.get(`/fileviewbyuser/${i}`);e.status===200?(this.items=e.data.data.fileList,this.userProfile=e.data.data.detailUser):this.$showToast("error","Sorry",e.data.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}}},mounted(){this.getListFile(this.userUuid)}},H={class:"d-flex justify-end mb-6"},P={class:"d-flex align-center pe-2 w-25"},F=o("p",null,"Data Kosong",-1),S=o("p",null,"Data Kosong",-1),U=o("p",null,"loading data .....",-1),B=["href"],L={class:"operation-wrapper"},N={class:"d-flex justify-space-between"},E=["onClick"];function I(i,e,d,j,r,n){const p=V("EasyDataTable");return w(),x("div",null,[s(h,{class:"auth-card pa-4 pt-5"},{default:t(()=>[s(y,{class:"align-left"},{default:t(()=>[o("span",{color:"primary",onClick:e[0]||(e[0]=(...a)=>n.goBack&&n.goBack(...a)),style:{cursor:"pointer"}},[s(m,{icon:"bx-arrow-back",color:"primary",tag:"back",start:""}),l(" Back ")]),s(g,{class:"text-2xl font-weight-bold"},{default:t(()=>[l(" List File Akses User : "+u(r.userProfile.name??"-"),1)]),_:1})]),_:1}),o("div",H,[o("div",P,[s(b,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:r.searchValue,"onUpdate:modelValue":e[1]||(e[1]=a=>r.searchValue=a)},null,8,["modelValue"])])]),s(D,{modelValue:r.detailHistory,"onUpdate:modelValue":e[2]||(e[2]=a=>r.detailHistory=a),width:"100%"},{default:t(()=>[s(h,null,{title:t(()=>[l(" Riwayat ")]),text:t(()=>[s(p,{"show-index":"",headers:r.headersHistory,items:r.itemsHistory},{"item-startTime":t(a=>[l(u(n.formatDate(a.startTime)),1)]),"empty-message":t(()=>[F]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),s(p,{"show-index":"",headers:r.headers,items:r.items,"search-value":r.searchValue},{"empty-message":t(()=>[S]),loading:t(()=>[U]),"item-path":t(a=>[o("a",{href:r.filePath+a.path,target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer !important"}},[s(T,{color:"primary"},{default:t(()=>[s(m,{start:"",icon:"mdi-file"}),l(" lihat ")]),_:1})],8,B)]),"item-latest_view":t(a=>[l(u(n.formatDate(a.latest_view)),1)]),"item-operation":t(a=>[o("div",L,[o("div",N,[s(k,{location:"top",text:"Lihat Detail"},{activator:t(({props:f})=>[o("button",v(f,{onClick:K=>n.openModal(a.id)}),[s(m,{size:"20",icon:"bx-file-find"})],16,E)]),_:2},1024)])])]),_:1},8,["headers","items","search-value"])]),_:1})])}const ee=_(C,[["render",I]]);export{ee as default};
