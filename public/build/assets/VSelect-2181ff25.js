import{m as Q,V as O}from"./VTextField-61fcadc2.js";import{f as X}from"./index-22d0eeab.js";import{C as E,I as Z,ag as ee,S as le,H as ae,ah as ne,i as S,Y as R,m as w,M as te,P as oe,a as o,F as T,W as P,l as M,ai as ue,e as se,aj as ie}from"./main-17afa27c.js";import{m as re,u as ce,V as de,a as fe,b as _}from"./VMenu-f0f5f0a9.js";import{m as ve}from"./VImg-dffafabf.js";import{b as me}from"./VCounter-848da541.js";import{V as pe}from"./dialog-transition-d20a49e9.js";import{V as he}from"./VCheckboxBtn-e9faefbc.js";import{V as ye}from"./VChip-3977c6ed.js";const Ve=E({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:Z,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:ee},...re({itemChildren:!1})},"select"),Ce=E({...Ve(),...le(Q({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ve({transition:{component:pe}})},"v-select"),Se=ae()({name:"VSelect",props:Ce(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,K){let{slots:a}=K;const{t:U}=ne(),D=S(),B=S(),x=R(e,"menu"),f=w({get:()=>x.value,set:l=>{var t;x.value&&!l&&((t=B.value)!=null&&t.Î¨openChildren)||(x.value=l)}}),{items:y,transformIn:H,transformOut:N}=ce(e),i=R(e,"modelValue",[],l=>H(ie(l)),l=>{const t=N(l);return e.multiple?t:t[0]??null}),m=me(),V=w(()=>i.value.map(l=>y.value.find(t=>e.valueComparator(t.value,l.value))||l)),F=w(()=>V.value.map(l=>l.props.value)),p=te(!1);let I="",A;const b=w(()=>e.hideSelected?y.value.filter(l=>!V.value.some(t=>t===l)):y.value),h=S();function $(l){e.openOnClear&&(f.value=!0)}function j(){e.hideNoData&&!y.value.length||e.readonly||m!=null&&m.isReadonly.value||(f.value=!f.value)}function z(l){var n,r,c,u;if(e.readonly||m!=null&&m.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(l.key)&&l.preventDefault(),["Enter","ArrowDown"," "].includes(l.key)&&(f.value=!0),["Escape","Tab"].includes(l.key)&&(f.value=!1),l.key==="ArrowDown"?(n=h.value)==null||n.focus("next"):l.key==="ArrowUp"?(r=h.value)==null||r.focus("prev"):l.key==="Home"?(c=h.value)==null||c.focus("first"):l.key==="End"&&((u=h.value)==null||u.focus("last"));const t=1e3;function v(d){const s=d.key.length===1,g=!d.ctrlKey&&!d.metaKey&&!d.altKey;return s&&g}if(e.multiple||!v(l))return;const C=performance.now();C-A>t&&(I=""),I+=l.key.toLowerCase(),A=C;const k=y.value.find(d=>d.title.toLowerCase().startsWith(I));k!==void 0&&(i.value=[k])}function L(l){if(e.multiple){const t=F.value.findIndex(v=>e.valueComparator(v,l.value));if(t===-1)i.value=[...i.value,l];else{const v=[...i.value];v.splice(t,1),i.value=v}}else i.value=[l],f.value=!1}function W(l){var t;(t=h.value)!=null&&t.$el.contains(l.relatedTarget)||(f.value=!1)}function Y(){var l;p.value&&((l=D.value)==null||l.focus())}function q(l){p.value=!0}return oe(()=>{const l=!!(e.chips||a.chip),t=!!(!e.hideNoData||b.value.length||a.prepend||a.append||a["no-data"]),v=i.value.length>0,[C]=O.filterProps(e),k=v||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return o(O,P({ref:D},C,{modelValue:i.value.map(n=>n.props.value).join(", "),"onUpdate:modelValue":n=>{n==null&&(i.value=[])},focused:p.value,"onUpdate:focused":n=>p.value=n,validationValue:i.externalValue,dirty:v,class:["v-select",{"v-select--active-menu":f.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,readonly:!0,placeholder:k,"onClick:clear":$,"onMousedown:control":j,onBlur:W,onKeydown:z}),{...a,default:()=>o(T,null,[o(de,P({ref:B,modelValue:f.value,"onUpdate:modelValue":n=>f.value=n,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:Y},e.menuProps),{default:()=>[t&&o(fe,{ref:h,selected:F.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onFocusin:q},{default:()=>{var n,r,c;return[!b.value.length&&!e.hideNoData&&(((n=a["no-data"])==null?void 0:n.call(a))??o(_,{title:U(e.noDataText)},null)),(r=a["prepend-item"])==null?void 0:r.call(a),b.value.map((u,d)=>{var g;const s=P(u.props,{key:d,onClick:()=>L(u)});return((g=a.item)==null?void 0:g.call(a,{item:u,index:d,props:s}))??o(_,s,{prepend:G=>{let{isSelected:J}=G;return o(T,null,[e.multiple&&!e.hideSelected?o(he,{key:u.value,modelValue:J,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependIcon&&o(M,{icon:u.props.prependIcon},null)])}})}),(c=a["append-item"])==null?void 0:c.call(a)]}})]}),V.value.map((n,r)=>{var d;function c(s){s.stopPropagation(),s.preventDefault(),L(n)}const u={"onClick:close":c,onMousedown(s){s.preventDefault(),s.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0};return o("div",{key:n.value,class:"v-select__selection"},[l?a.chip?o(ue,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>{var s;return[(s=a.chip)==null?void 0:s.call(a,{item:n,index:r,props:u})]}}):o(ye,P({key:"chip",closable:e.closableChips,size:"small",text:n.title},u),null):((d=a.selection)==null?void 0:d.call(a,{item:n,index:r}))??o("span",{class:"v-select__selection-text"},[n.title,e.multiple&&r<V.value.length-1&&o("span",{class:"v-select__selection-comma"},[se(",")])])])})]),"append-inner":function(){var u;for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return o(T,null,[(u=a["append-inner"])==null?void 0:u.call(a,...r),e.menuIcon?o(M,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),X({isFocused:p,menu:f,select:L},D)}});export{Se as V};
