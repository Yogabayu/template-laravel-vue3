import{m as c}from"./axios-e7133cbe.js";import{_}from"./_plugin-vue_export-helper-c27b6911.js";import{V as h,a as y,c as g}from"./VCard-215063b9.js";import{r as V,o as x,c as w,a as s,w as t,b as i,l as u,e as o,t as m,W as v}from"./main-17afa27c.js";import{V as b}from"./VTextField-61fcadc2.js";import{V as k}from"./VDialog-3e9f05df.js";import{V as D}from"./VChip-3977c6ed.js";import{V as T}from"./VTooltip-7f8095cd.js";import"./VAvatar-5f164e6d.js";import"./VImg-dffafabf.js";import"./VCounter-848da541.js";import"./index-22d0eeab.js";import"./VOverlay-e4833b2f.js";import"./dialog-transition-d20a49e9.js";const C={data(){return{userUuid:this.$route.params.userUuid,filePath:this.$filePath,userProfile:{},detailHistory:!1,searchValue:"",items:[],headers:[{text:"Nama File",value:"name",sortable:!0},{text:"File",value:"path",sortable:!0},{text:"Terakhir dilihat",value:"latest_view",sortable:!0},{text:"Operation",value:"operation"}],itemsHistory:[],headersHistory:[{text:"File",value:"file.name",sortable:!0},{text:"Dilihat",value:"startTime",sortable:!0},{text:"Lama Waktu",value:"timespent",sortable:!0}]}},methods:{formatDate(l){return new Date(l).toLocaleString("id-ID")},async openModal(l){try{const e=new FormData;e.append("uuid",this.userProfile.uuid),e.append("fileid",l),e.append("_method","POST");const d=await c.post("/listhistoryfilebyuser",e);d.status===200?(this.itemsHistory=d.data.data,this.detailHistory=!0):this.$showToast("error","Sorry",d.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},goBack(){this.$router.go(-1)},async getListFile(l){try{const e=await c.get(`/fileviewbyuser/${l}`);e.status===200?(this.items=e.data.data.fileList,this.userProfile=e.data.data.detailUser):this.$showToast("error","Sorry",e.data.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}}},mounted(){this.getListFile(this.userUuid)}},H={class:"d-flex justify-end mb-6"},P={class:"d-flex align-center pe-2 w-25"},F=i("p",null,"Data Kosong",-1),L=i("p",null,"Data Kosong",-1),S=i("p",null,"loading data .....",-1),U=["href"],B={class:"operation-wrapper"},N={class:"d-flex justify-space-between"},E=["onClick"];function I(l,e,d,j,r,n){const p=V("EasyDataTable");return x(),w("div",null,[s(h,{class:"auth-card pa-4 pt-5"},{default:t(()=>[s(y,{class:"align-left"},{default:t(()=>[i("span",{color:"primary",onClick:e[0]||(e[0]=(...a)=>n.goBack&&n.goBack(...a)),style:{cursor:"pointer"}},[s(u,{icon:"bx-arrow-back",color:"primary",tag:"back",start:""}),o(" Back ")]),s(g,{class:"text-2xl font-weight-bold"},{default:t(()=>[o(" List File Akses User : "+m(r.userProfile.name??"-"),1)]),_:1})]),_:1}),i("div",H,[i("div",P,[s(b,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:r.searchValue,"onUpdate:modelValue":e[1]||(e[1]=a=>r.searchValue=a)},null,8,["modelValue"])])]),s(k,{modelValue:r.detailHistory,"onUpdate:modelValue":e[2]||(e[2]=a=>r.detailHistory=a),width:"100%"},{default:t(()=>[s(h,null,{title:t(()=>[o(" Riwayat ")]),text:t(()=>[s(p,{"show-index":"",headers:r.headersHistory,items:r.itemsHistory},{"item-startTime":t(a=>[o(m(n.formatDate(a.startTime)),1)]),"item-timespent":t(a=>[o(m(a.timespent)+" second ",1)]),"empty-message":t(()=>[F]),_:1},8,["headers","items"])]),_:1})]),_:1},8,["modelValue"]),s(p,{"show-index":"",headers:r.headers,items:r.items,"search-value":r.searchValue},{"empty-message":t(()=>[L]),loading:t(()=>[S]),"item-path":t(a=>[i("a",{href:r.filePath+a.path,target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer !important"}},[s(D,{color:"primary"},{default:t(()=>[s(u,{start:"",icon:"mdi-file"}),o(" lihat ")]),_:1})],8,U)]),"item-latest_view":t(a=>[o(m(n.formatDate(a.latest_view)),1)]),"item-operation":t(a=>[i("div",B,[i("div",N,[s(T,{location:"top",text:"Lihat Detail"},{activator:t(({props:f})=>[i("button",v(f,{onClick:K=>n.openModal(a.id)}),[s(u,{size:"20",icon:"bx-file-find"})],16,E)]),_:2},1024)])])]),_:1},8,["headers","items","search-value"])]),_:1})])}const ee=_(C,[["render",I]]);export{ee as default};
