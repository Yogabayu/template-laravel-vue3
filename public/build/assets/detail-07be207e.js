import{m as b}from"./VAvatar-368a1dc6.js";import{r as E,o as r,c as f,a as e,w as t,G as w,E as q,b as n,i as C,e as d,t as p,h as _,f as c,V as x,F as V,d as U,N as J}from"./main-2c9a0e59.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{V as Q}from"./VOverlay-547ccc7e.js";import{V as y,c as T,a as M}from"./VCard-ddac2cfd.js";import{V as g,a as i}from"./VRow-4964dfbe.js";import{V as X}from"./VDialog-6332b061.js";import{V as D}from"./VSpacer-9e486da0.js";import{V as I}from"./VContainer-668d95bd.js";import{V as P}from"./VChip-847e90bf.js";import{V as F}from"./VForm-4031e0c2.js";import{V as O}from"./VTextarea-f9ecc1fb.js";import{V as L}from"./VFileInput-011b75bc.js";import{V as A,a as j,b as B,c as S,d as W,e as Y}from"./VPagination-44425931.js";import{d as N}from"./VMenu-67634d80.js";import{V as Z}from"./VSelect-cb7dfb2a.js";import"./VImg-abb88c8a.js";import"./index-e994dd60.js";import"./dialog-transition-29f1fa53.js";import"./VCounter-38b10764.js";import"./VTextField-bb8bb7fd.js";const $={watch:{histories:{handler:function(o,a){this.displayedHistories=this.calculateDisplayedHistories()},deep:!0},currentPageHistory:function(){this.displayedHistories=this.calculateDisplayedHistories()}},data(){return{draftId:this.$route.params.draftId,draftUrl:this.$draftUrl,drafCommenttUrl:this.$drafCommenttUrl,attachment:!1,updatePosProv:!1,overlay:!1,updateComment:!1,difPos:!1,uploadProgress:null,userData:JSON.parse(localStorage.getItem("userData")),dataPosProv:{id:null,statusPosProv:null},dataComment:{draft_id:this.$route.params.draftId,desc:null,attachment:null},updateDataComment:{id:null,desc:null,attachment:null},updateAttachment:!1,displayComment:!0,draft:{},selectedPositions:[],comments:[],currentPageHistory:1,perPageHistory:5,histories:[]}},computed:{totalPages(){return Math.ceil(this.histories.length/this.perPageHistory)},displayedHistories(){const o=(this.currentPageHistory-1)*this.perPageHistory,a=o+this.perPageHistory;return this.histories.filter((v,k)=>k>=o&&k<a)}},methods:{calculateDisplayedHistories(){const o=(this.currentPageHistory-1)*this.perPageHistory,a=o+this.perPageHistory;return this.histories.filter((v,k)=>k>=o&&k<a)},changePage(o){this.currentPageHistory=o},goBack(){this.$router.go(-1)},getFileExtension(o){return o?o.slice((o.lastIndexOf(".")-1>>>0)+2):""},handleFileChange(o){const a=o.target.files[0];a&&["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(a.type)?this.dataComment.attachment=a:(this.$showToast("error","Error","Hanya file PDF / DOC / DOCX / XLX / XLSX yang diizinkan."),o.target.value=null)},updatecommenthandleFileChange(o){const a=o.target.files[0];a&&["application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(a.type)?this.updateDataComment.attachment=a:(this.$showToast("error","Error","Hanya file PDF / DOC / DOCX / XLX / XLSX yang diizinkan."),o.target.value=null)},closeModal(o){o==1?(this.dataPosProv.id=null,this.dataPosProv.statusPosProv=null,this.updatePosProv=!1):o==2?(this.dataComment.desc=null,this.dataComment.attachment=null,this.$refs.fileInput&&this.$refs.fileInput.reset()):o==3&&(this.updateDataComment.id=null,this.updateDataComment.desc=null,this.updateDataComment.attachment=null,this.updateComment=!1)},formatDate(o){return new Date(o).toLocaleDateString("id-ID")},async getDetailDraft(o){try{this.overlay=!0;const a=await b.get(`/user/draft/${o}`);a.status===200?(this.draft=a.data.data,this.selectedPositions=a.data.data.positions,this.comments=a.data.data.comments,this.histories=a.data.data.draft_activities,this.draft.user.position_id==this.userData.position_id&&(this.difPos=!0),this.overlay=!1):(this.overlay=!1,this.$showToast("error","Sorry",a.data.data.message))}catch(a){this.overlay=!1,this.$showToast("error","Sorry",a.response.data.data.message)}},openModal(o,a=null){o==1?(this.dataPosProv.id=a.pivot.id,this.dataPosProv.statusPosProv=a.pivot.is_approved,this.updatePosProv=!0):o==2&&(this.updateDataComment.id=a.id,this.updateDataComment.desc=a.desc,this.updateComment=!0)},async changeDraftStatus(o){try{this.overlay=!0;const a=await b.get(`/user/changestatusdraft/${o}`);a.status===200?(this.getDetailDraft(this.draftId),this.overlay=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.$showToast("error","Sorry",a.data.message))}catch(a){this.overlay=!1,this.$showToast("error","Sorry",a.response.data.message)}},async changePosApprove(){try{this.overlay=!0;const o=new FormData;o.append("id",this.dataPosProv.id),o.append("statusPosProv",this.dataPosProv.statusPosProv),o.append("_method","POST");const a=await b.post("/user/changeposapprove",o);a.status===200?(this.closeModal(1),this.getDetailDraft(this.draftId),this.overlay=!1,this.$showToast("success","Success",a.data.message)):(this.overlay=!1,this.$showToast("error","Sorry",a.data.message),this.closeModal(1))}catch(o){this.overlay=!1,this.closeModal(1),this.$showToast("error","Sorry",o.response.data.message)}},async addComment(){try{this.overlay=!0,this.dataComment.desc===null&&this.$showToast("error","Sorry","komentar wajib diisi");const o=new FormData;o.append("draft_id",this.dataComment.draft_id),o.append("desc",this.dataComment.desc),this.dataComment.attachment!=null&&o.append("attachment",this.dataComment.attachment),o.append("_method","POST");const a={onUploadProgress:k=>{try{this.uploadProgress=Math.round(k.loaded*100/k.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},v=await b.post("/user/adddraftcomment",o,a);v.status===200?(this.overlay=!1,this.closeModal(2),this.getDetailDraft(this.draftId),this.uploadProgress=null,this.$showToast("success","Success",v.data.message)):(this.overlay=!1,this.closeModal(2),this.uploadProgress=null,this.$showToast("error","Sorry",v.data.message))}catch(o){this.overlay=!1,this.closeModal(2),this.$showToast("error","Sorry",o.response.data.message)}},async sendUpdateComment(){try{this.overlay=!0,this.updateDataComment.desc===null&&this.$showToast("error","Sorry","komentar wajib diisi");const o=new FormData;o.append("desc",this.updateDataComment.desc),this.updateDataComment.attachment!=null&&o.append("attachment",this.updateDataComment.attachment),o.append("_method","PUT");const a={onUploadProgress:k=>{try{this.uploadProgress=Math.round(k.loaded*100/k.total)}catch(s){console.error("Error calculating progress:",s)}},headers:{"Content-Type":"multipart/form-data"}},v=await b.post(`/user/updatedraftcomment/${this.updateDataComment.id}`,o,a);v.status===200?(this.overlay=!1,this.closeModal(3),this.getDetailDraft(this.draftId),this.uploadProgress=null,this.$showToast("success","Success",v.data.message)):(this.overlay=!1,this.closeModal(3),this.getDetailDraft(this.draftId),this.uploadProgress=null,this.$showToast("error","Sorry",v.data.message))}catch(o){this.getDetailDraft(this.draftId),this.overlay=!1,this.closeModal(3),this.$showToast("error","Sorry",o.response.data.message)}},async deleteComment(o){try{if(this.overlay=!0,!window.confirm("Semua Data yang terkait akan ikut terhapus. Apakah Anda yakin ingin menghapus data?")){this.overlay=!1;return}const v=await b.delete(`/user/deletedraftcomment/${o}`);v.status===200?(this.overlay=!1,this.getDetailDraft(this.draftId),this.$showToast("success","Success",v.data.message)):(this.overlay=!1,this.getDetailDraft(this.draftId),this.$showToast("error","Sorry",v.data.data.message))}catch(a){this.overlay=!1,this.getDetailDraft(this.draftId),this.$showToast("error","Sorry",a.response.data.message)}}},mounted(){this.getDetailDraft(this.draftId)}},ee=n("h4",null,"Status",-1),te=["href"],ae=n("h4",null,"Discussion",-1),se={key:0},le={class:"text-medium-emphasis font-weight-bold"},oe={class:"py-2"},re={class:"font-weight-light text-medium-emphasis"},ne={class:"pa-4 d-flex align-center"},ie={key:0},de={key:1},ue=["href"],ce={key:0},me={class:"text-medium-emphasis font-weight-bold"},fe={class:"py-2"},pe={class:"font-weight-light text-medium-emphasis"},he={class:"pa-4 d-flex align-center"},_e={key:0},ye={key:1},ge=["href"],ve={key:0},Ce={class:"text-medium-emphasis font-weight-bold"},ke={class:"text-medium-emphasis font-weight-bold"},Pe={class:"py-2"},xe={class:"font-weight-light text-medium-emphasis"},De={class:"pa-4 d-flex align-center"},we={key:0},be={key:1},Ve=["href"],Se={key:0},Te=n("h4",null,"History",-1);function Ie(o,a,v,k,s,u){const H=E("v-cart-text"),R=E("v-expandion-panel-text");return r(),f(w,null,[e(Q,{"model-value":s.overlay,class:"align-center justify-center"},{default:t(()=>[e(q,{color:"primary",size:"64",indeterminate:""})]),_:1},8,["model-value"]),e(y,{class:"auth-card pa-2 pt-5"},{default:t(()=>[n("span",{color:"primary",onClick:a[0]||(a[0]=(...l)=>u.goBack&&u.goBack(...l)),style:{cursor:"pointer"}},[e(C,{icon:"bx-arrow-back",color:"primary",tag:"back",start:""}),d(" Back ")]),e(T,{class:"text-2xl font-weight-bold d-flex justify-center overflow-auto"},{default:t(()=>[d(p(s.draft.title),1)]),_:1}),s.draft.status=="approved"?(r(),_(Y,{key:0,text:"Draft Telah dinyatakan disetujui oleh semua pihak",title:"Draft Telah disetujui",type:"success"})):c("",!0)]),_:1}),e(D,{class:"ma-2"}),e(y,{class:"auth-card pt-5"},{default:t(()=>[e(I,{fluid:""},{default:t(()=>[e(g,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",sm:"2",class:"pa-0"},{default:t(()=>[n("h4",null,p(s.draft.title),1)]),_:1}),e(D),e(i,{cols:"12",sm:"2",class:"pa-0"},{default:t(()=>[ee]),_:1}),e(i,{cols:"12",sm:"2",class:"pa-0"},{default:t(()=>[s.draft.status=="approved"?(r(),_(P,{key:0,class:"ma-2",color:"success","prepend-icon":"mdi-checkbox-marked-circle",onClick:a[1]||(a[1]=l=>u.changeDraftStatus(s.draft.id))},{default:t(()=>[d(" Approved ")]),_:1})):c("",!0),s.draft.status=="pending"?(r(),_(P,{key:1,class:"ma-2",color:"warning","prepend-icon":"mdi-alert",onClick:a[2]||(a[2]=l=>u.changeDraftStatus(s.draft.id))},{default:t(()=>[d(" Pending ")]),_:1})):c("",!0),s.draft.status=="rejected"?(r(),_(P,{key:2,class:"ma-2",color:"error","prepend-icon":"mdi-alert"},{default:t(()=>[d(" Rejected ")]),_:1})):c("",!0)]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(i,{cols:"12",sm:"12",class:"px-2 py-0"},{default:t(()=>[n("h5",null,p(u.formatDate(s.draft.created_at)),1)]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(i,{cols:"12",sm:"3",class:"px-2 py-0"},{default:t(()=>{var l,h;return[n("h5",null,"Pengunggah: "+p((h=(l=s.draft)==null?void 0:l.user)==null?void 0:h.name),1)]}),_:1}),e(i,{cols:"12",sm:"3",class:"px-2 py-0"},{default:t(()=>{var l,h,m;return[n("h5",null,"Jabatan: "+p((m=(h=(l=s.draft)==null?void 0:l.user)==null?void 0:h.position)==null?void 0:m.name),1)]}),_:1})]),_:1}),e(g,null,{default:t(()=>[e(i,{cols:"12",class:"px-2 py-1"},{default:t(()=>{var l;return[d(p(((l=s.draft)==null?void 0:l.desc)||"unknown"),1)]}),_:1})]),_:1}),e(g,null,{default:t(()=>[e(i,{cols:"12",sm:"10",class:"px-2 py-2"},{default:t(()=>{var l,h;return[n("a",{href:s.draftUrl+"/"+((l=s.draft)==null?void 0:l.file),target:"_blank"},[e(x,{"prepend-icon":u.getFileExtension((h=s.draft)==null?void 0:h.file)==="pdf"?"mdi-file-pdf":"mdi-file-word",size:"small"},{default:t(()=>{var m;return[d(p((m=s.draft)==null?void 0:m.file),1)]}),_:1},8,["prepend-icon"])],8,te)]}),_:1})]),_:1})]),_:1})]),_:1}),e(D,{class:"ma-2"}),e(y,{class:"auth-card pt-5"},{default:t(()=>[e(I,{fluid:""},{default:t(()=>[e(g,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",sm:"12",class:"pa-0"},{default:t(()=>[n("h4",null,"Required Approval : "+p(s.draft.required_approvals),1)]),_:1})]),_:1}),e(g,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",sm:"12",class:"pa-0"},{default:t(()=>[(r(!0),f(w,null,V(s.selectedPositions,(l,h)=>{var m;return r(),_(P,{color:(m=l==null?void 0:l.pivot)!=null&&m.is_approved?"success":"error",key:h,class:"ma-2",onClick:z=>u.openModal(1,l)},{default:t(()=>[d(p(l.name),1)]),_:2},1032,["color","onClick"])}),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{class:"ma-2"}),e(g,null,{default:t(()=>[e(i,{cols:"12",md:"8"},{default:t(()=>[e(y,{class:"auth-card pt-5"},{default:t(()=>[e(I,{fluid:""},{default:t(()=>[e(g,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",sm:"12",class:"pa-0"},{default:t(()=>[ae]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(i,{cols:"12",sm:"12"},{default:t(()=>[e(y,{variant:"outlined"},{default:t(()=>[e(T,null,{default:t(()=>[e(F,{onSubmit:U(u.addComment,["prevent"])},{default:t(()=>[e(g,{align:"center",justify:"center"},{default:t(()=>[e(i,{md:"10",cols:"10"},{default:t(()=>[e(O,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.dataComment.desc,"onUpdate:modelValue":a[3]||(a[3]=l=>s.dataComment.desc=l)},null,8,["modelValue"])]),_:1}),e(i,{md:"2",cols:"2",class:"d-flex justify-space-between align-center"},{default:t(()=>[e(x,{icon:"",color:"primary",onClick:u.addComment},{default:t(()=>[e(C,null,{default:t(()=>[d("mdi-send")]),_:1})]),_:1},8,["onClick"]),e(x,{icon:"",color:"secondary",size:"small",onClick:a[4]||(a[4]=l=>s.attachment=!s.attachment)},{default:t(()=>[e(C,null,{default:t(()=>[d("mdi-paperclip")]),_:1})]),_:1})]),_:1}),s.attachment?(r(),_(i,{key:0,cols:"12"},{default:t(()=>[e(L,{accept:`application/pdf,
                      application/msword,
                      application/vnd.openxmlformats-officedocument.wordprocessingml.document,
                      application/vnd.ms-excel,
                      application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,"prepend-icon":"mdi-file",label:"File Attachment",onChange:u.handleFileChange,ref:"fileInput"},null,8,["onChange"])]),_:1})):c("",!0)]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(i,null,{default:t(()=>[e(I,null,{default:t(()=>[e(g,null,{default:t(()=>[e(i,{cols:"12",sm:"4"},{default:t(()=>[s.displayComment==!1?(r(),_(P,{key:0,color:"primary",onClick:a[5]||(a[5]=l=>s.displayComment=!s.displayComment)},{default:t(()=>[d("Semua Komentar")]),_:1})):c("",!0),s.displayComment==!0?(r(),_(P,{key:1,color:"secondary",onClick:a[6]||(a[6]=l=>s.displayComment=!s.displayComment)},{default:t(()=>[d("Semua Komentar")]),_:1})):c("",!0)]),_:1}),e(i,{cols:"12",sm:"4"},{default:t(()=>[s.displayComment==!0?(r(),_(P,{key:0,color:"primary",onClick:a[7]||(a[7]=l=>s.displayComment=!s.displayComment)},{default:t(()=>[d("Perposisi")]),_:1})):c("",!0),s.displayComment==!1?(r(),_(P,{key:1,color:"secondary",onClick:a[8]||(a[8]=l=>s.displayComment=!s.displayComment)},{default:t(()=>[d("Perposisi")]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s.displayComment==!0?(r(),_(y,{key:0,variant:"outlined",color:"secondary"},{default:t(()=>[s.difPos?(r(),f("div",se,[e(g,null,{default:t(()=>[e(i,null,{default:t(()=>[e(A,null,{default:t(()=>[e(j,null,{default:t(()=>[e(B,null,{default:t(()=>{var l,h;return[d(p((h=(l=s.userData)==null?void 0:l.position)==null?void 0:h.name),1)]}),_:1}),(r(!0),f(w,null,V(s.comments,(l,h)=>(r(),f("div",{key:h},[s.userData.position.id==l.user.position_id?(r(),_(S,{key:0},{default:t(()=>[e(y,{class:"mx-auto",color:"secondary",variant:"flat"},{default:t(()=>[e(y,{class:"ma-4",rounded:"lg",variant:"flat"},{default:t(()=>[e(M,null,{default:t(()=>[e(T,{class:"text-body-2 d-flex align-center"},{default:t(()=>[e(C,{color:"#949cf7",icon:"mdi-calendar",start:""}),n("span",le,p(u.formatDate(l.created_at)),1)]),_:2},1024),n("div",oe,[n("div",re,p(l.desc)+" as ",1)])]),_:2},1024),e(N),n("div",ne,[s.userData.uuid==l.user.uuid?(r(),f("div",ie,[n("button",null,[e(C,{size:"20",icon:"bx-edit",color:"blue",onClick:m=>u.openModal(2,l)},null,8,["onClick"])])])):c("",!0),s.userData.uuid==l.user.uuid?(r(),f("div",de,[n("button",null,[e(C,{size:"20",icon:"bx-trash",color:"red",onClick:m=>u.deleteComment(l.id)},null,8,["onClick"])])])):c("",!0),e(D),l.attachment?(r(),f("a",{key:2,href:s.drafCommenttUrl+l.attachment,target:"_blank"},[l.attachment?(r(),_(x,{key:0,class:"me-2 text-none","prepend-icon":"mdi-paperclip",variant:"flat"},{default:t(()=>[d(p(l.attachment),1)]),_:2},1024)):c("",!0)],8,ue)):c("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)):c("",!0)]))),128)),s.comments!=null&&s.comments.length==0?(r(),f("div",ce,[e(S,null,{default:t(()=>[e(y,{class:"mx-auto",color:"secondary",variant:"flat"},{default:t(()=>[e(H,null,{default:t(()=>[d(" Belum ada komentar ")]),_:1})]),_:1})]),_:1})])):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])):c("",!0),(r(!0),f(w,null,V(s.selectedPositions,(l,h)=>(r(),f("div",{key:h},[e(g,null,{default:t(()=>[e(i,null,{default:t(()=>[e(A,null,{default:t(()=>[e(j,null,{default:t(()=>[e(B,null,{default:t(()=>[d(p(l.name)+" ",1),l.pivot.is_approved==1?(r(),_(P,{key:0,class:"ma-2",color:"success","prepend-icon":"mdi-checkbox-marked-circle",onClick:m=>u.openModal(1,l)},{default:t(()=>[d(" Approved ")]),_:2},1032,["onClick"])):(r(),_(P,{key:1,class:"ma-2",color:"error","prepend-icon":"mdi-alert",onClick:m=>u.openModal(1,l)},{default:t(()=>[d(" Not Approved ")]),_:2},1032,["onClick"]))]),_:2},1024),(r(!0),f(w,null,V(s.comments,(m,z)=>(r(),f("div",{key:z},[l.id==m.user.position_id?(r(),_(S,{key:0},{default:t(()=>[e(y,{class:"mx-auto",color:"secondary",variant:"flat"},{default:t(()=>[e(y,{class:"ma-4",rounded:"lg",variant:"flat"},{default:t(()=>[e(M,null,{default:t(()=>[e(T,{class:"text-body-2 d-flex align-center"},{default:t(()=>[e(C,{color:"#949cf7",icon:"mdi-calendar",start:""}),n("span",me,p(u.formatDate(m.created_at)),1)]),_:2},1024),n("div",fe,[n("div",pe,p(m.desc),1)])]),_:2},1024),e(N),n("div",he,[s.userData.uuid==m.user.uuid?(r(),f("div",_e,[n("button",null,[e(C,{size:"20",icon:"bx-edit",color:"blue",onClick:K=>u.openModal(2,m)},null,8,["onClick"])])])):c("",!0),s.userData.uuid==m.user.uuid?(r(),f("div",ye,[n("button",null,[e(C,{size:"20",icon:"bx-trash",color:"red",onClick:K=>u.deleteComment(m.id)},null,8,["onClick"])])])):c("",!0),e(D),m.attachment?(r(),f("a",{key:2,href:s.drafCommenttUrl+m.attachment,target:"_blank"},[m.attachment?(r(),_(x,{key:0,class:"me-2 text-none","prepend-icon":"mdi-paperclip",variant:"flat"},{default:t(()=>[d(p(m.attachment),1)]),_:2},1024)):c("",!0)],8,ge)):c("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)):c("",!0)]))),128)),s.comments!=null&&s.comments.length==0?(r(),f("div",ve,[e(S,null,{default:t(()=>[e(y,{class:"mx-auto",color:"secondary",variant:"flat"},{default:t(()=>[e(H,null,{default:t(()=>[d(" Belum ada komentar ")]),_:1})]),_:1})]),_:1})])):c("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))]),_:1})):c("",!0),e(g,null,{default:t(()=>[e(i,null,{default:t(()=>[s.displayComment==!1?(r(),_(y,{key:0,variant:"outlined",color:"secondary"},{default:t(()=>[n("div",null,[e(g,null,{default:t(()=>[e(i,null,{default:t(()=>[e(A,null,{default:t(()=>[e(j,null,{default:t(()=>[e(B,null,{default:t(()=>[d(" Semua Komentar ")]),_:1}),e(S,null,{default:t(()=>[(r(!0),f(w,null,V(s.comments,(l,h)=>(r(),f("div",{key:h},[e(S,null,{default:t(()=>[e(y,{class:"mx-auto",color:"secondary",variant:"flat"},{default:t(()=>[e(y,{class:"ma-4",rounded:"lg",variant:"flat"},{default:t(()=>[e(M,null,{default:t(()=>[e(T,{class:"text-body-2 d-flex align-center"},{default:t(()=>[n("span",Ce,p(l.user.name),1),e(D),e(C,{color:"#949cf7",icon:"mdi-calendar",start:""}),n("span",ke,p(u.formatDate(l.created_at)),1)]),_:2},1024),n("div",Pe,[n("div",xe,p(l.desc),1)])]),_:2},1024),n("div",De,[s.userData.uuid==l.user.uuid?(r(),f("div",we,[n("button",null,[e(C,{size:"20",icon:"bx-edit",color:"blue"})])])):c("",!0),s.userData.uuid==l.user.uuid?(r(),f("div",be,[n("button",null,[e(C,{size:"20",icon:"bx-trash",color:"red",onClick:m=>u.deleteComment(l.id)},null,8,["onClick"])])])):c("",!0),e(D),l.attachment?(r(),f("a",{key:2,href:s.drafCommenttUrl+l.attachment,target:"_blank"},[e(x,{class:"me-2 text-none","prepend-icon":"mdi-paperclip",variant:"flat"},{default:t(()=>[d(p(l.attachment.substring(0,10)+"..."),1)]),_:2},1024)],8,Ve)):c("",!0)])]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128)),s.comments!=null&&s.comments.length==0?(r(),f("div",Se,[e(R,null,{default:t(()=>[e(y,{class:"mx-auto",color:"secondary",variant:"flat"},{default:t(()=>[e(H,null,{default:t(()=>[d(" Belum ada komentar ")]),_:1})]),_:1})]),_:1})])):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})):c("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"12",md:"4"},{default:t(()=>[e(y,{class:"auth-card pt-5"},{default:t(()=>[e(I,{fluid:""},{default:t(()=>[e(g,{"no-gutters":""},{default:t(()=>[e(i,{cols:"12",sm:"12",class:"pa-0"},{default:t(()=>[Te]),_:1})]),_:1}),e(g,{"no-gutters":""},{default:t(()=>[(r(!0),f(w,null,V(u.displayedHistories,(l,h)=>(r(),_(i,{cols:"12",md:"12",key:h},{default:t(()=>[e(y,{class:"auth-card ma-1"},{subtitle:t(()=>[n("h4",null,p(l.user.name)+" - "+p(u.formatDate(l.created_at)),1)]),text:t(()=>[d(p(l.desc),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),e(W,{modelValue:s.currentPageHistory,"onUpdate:modelValue":a[9]||(a[9]=l=>s.currentPageHistory=l),length:u.totalPages,onInput:u.changePage},null,8,["modelValue","length","onInput"])]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{modelValue:s.updatePosProv,"onUpdate:modelValue":a[12]||(a[12]=l=>s.updatePosProv=l)},{default:t(()=>[e(y,null,{text:t(()=>[e(F,{onSubmit:U(u.changePosApprove,["prevent"])},{default:t(()=>[e(i,{cols:"12",md:"12"},{default:t(()=>[e(Z,{label:"Status Approve",items:[{value:1,title:"Approved"},{value:0,title:"Rejected"}],modelValue:s.dataPosProv.statusPosProv,"onUpdate:modelValue":a[10]||(a[10]=l=>s.dataPosProv.statusPosProv=l),"prepend-icon":"mdi-help-rhombus"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:t(()=>[e(x,{type:"submit"},{default:t(()=>[d("Update")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:a[11]||(a[11]=l=>u.closeModal(1))}," Batal ")]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),e(X,{modelValue:s.updateComment,"onUpdate:modelValue":a[17]||(a[17]=l=>s.updateComment=l)},{default:t(()=>[e(y,null,{title:t(()=>[d(" Edit Comment ")]),text:t(()=>[e(F,{onSubmit:U(u.sendUpdateComment,["prevent"])},{default:t(()=>[e(g,{align:"center",justify:"center"},{default:t(()=>[e(i,{md:"10",cols:"10"},{default:t(()=>[e(O,{"bg-color":"grey-lighten-2",color:"cyan",modelValue:s.updateDataComment.desc,"onUpdate:modelValue":a[13]||(a[13]=l=>s.updateDataComment.desc=l)},null,8,["modelValue"])]),_:1}),e(i,{md:"2",cols:"2",class:"d-flex justify-space-between align-center"},{default:t(()=>[e(x,{icon:"",color:"secondary",size:"small",onClick:a[14]||(a[14]=l=>s.updateAttachment=!s.updateAttachment)},{default:t(()=>[e(C,null,{default:t(()=>[d("mdi-paperclip")]),_:1})]),_:1})]),_:1}),s.updateAttachment?(r(),_(i,{key:0,cols:"12"},{default:t(()=>[e(L,{accept:`application/pdf,
                application/msword,
                application/vnd.openxmlformats-officedocument.wordprocessingml.document,
                application/vnd.ms-excel,
                application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`,"prepend-icon":"mdi-file",label:"File Attachment",onChange:u.updatecommenthandleFileChange},null,8,["onChange"])]),_:1})):c("",!0),e(i,{cols:"12",class:"d-flex flex-wrap justify-end gap-4"},{default:t(()=>[e(x,{type:"submit"},{default:t(()=>[d("Update")]),_:1}),n("button",{type:"button",class:"btn btn-blue",onClick:a[15]||(a[15]=l=>u.closeModal(3))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),actions:t(()=>[e(J,{modelValue:s.uploadProgress,"onUpdate:modelValue":a[16]||(a[16]=l=>s.uploadProgress=l),color:"amber",height:"25"},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64)}const Ze=G($,[["render",Ie]]);export{Ze as default};
