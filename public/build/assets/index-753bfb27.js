import{m as _}from"./axios-e7133cbe.js";import{C as F,af as N,D as B,aL as D,ag as I,at as R,aN as $,ah as j,E as L,ad as E,H as U,ae as M,_ as z,$ as A,aj as G,aS as H,ak as K,av as q,aU as J,al as O,P as Q,a as e,o as n,c as C,w as t,e as x,d as W,V as h,k as m,a5 as X,j as y,l as Y,F as Z,f as ee,b as c,t as v,a6 as ae,a7 as te}from"./main-7d418941.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import{V as S,c as oe,b as le,a as re,e as ie}from"./VCard-23e904fe.js";import{V as ne}from"./VForm-f418a26c.js";import{V as b}from"./VContainer-4d47053f.js";import{V as p,a as r}from"./VRow-663c3ab0.js";import{V as ce}from"./VTextField-7ff60477.js";import{V as de}from"./VSelect-95204a7b.js";import{V as ue}from"./VImg-15dacd56.js";import"./VAvatar-f4fe4ad8.js";import"./VCounter-0102cdf0.js";import"./index-d8cb4088.js";import"./VMenu-ac19c50e.js";import"./VDivider-c961a7ae.js";import"./VOverlay-0e4878ad.js";import"./dialog-transition-5a10010c.js";import"./VCheckboxBtn-d64bb66d.js";import"./VChip-a421fbee.js";const me=F({color:String,...N(),...B(),...D(),...I(),...R(),...$(),...j(),...L(),...E()},"v-sheet"),k=U()({name:"VSheet",props:me(),setup(a,s){let{slots:i}=s;const{themeClasses:d}=M(a),{backgroundColorClasses:o,backgroundColorStyles:u}=z(A(a,"color")),{borderClasses:l}=G(a),{dimensionStyles:g}=H(a),{elevationClasses:f}=K(a),{locationStyles:w}=q(a),{positionClasses:P}=J(a),{roundedClasses:T}=O(a);return Q(()=>e(a.tag,{class:["v-sheet",d.value,o.value,l.value,f.value,P.value,T.value,a.class],style:[u.value,g.value,w.value,a.style]},i)),{}}}),fe={data(){return{items:null,categories:null,selectedCategory:null,selectedName:null}},methods:{toDetail(a){this.$router.push(`/u-filedetail/${a}`)},searchFile(){this.getFileSearch(this.selectedName,this.selectedCategory)},async favorite(a){try{const s=await _.get(`/user/setfavfile/${a}`);s.status===200?(this.getFileSearch(),this.$showToast("success","Success",s.data.message)):(this.getFileSearch(),this.$showToast("error","Sorry",s.data.message))}catch(s){this.$showToast("error","Sorry",s.response.data.message)}},async getFileSearch(a=null,s=null){try{let i="/user/search?";a!==null&&(i+=`name=${a}`),s!==null&&(i+=(a!==null?"&":"")+`category=${s}`);const d=await _.get(i);d.status===200?this.items=d.data.data:this.$showToast("error","Sorry",d.data.data.message)}catch(i){this.$showToast("error","Sorry",i.data.data.message)}},async getCategory(){try{const a=await _.get("/user/category");a.status===200?this.categories=a.data.data.map(s=>({value:s.id,title:s.name})):this.$showToast("error","Sorry",a.data.data.message)}catch(a){this.$showToast("error","Sorry",a.data.data.message)}}},mounted(){this.getFileSearch(),this.getCategory()}},V=a=>(ae("data-v-446d94f0"),a=a(),te(),a),he=V(()=>c("span",{class:"subtitle-1"},"Getting Data ...",-1)),pe=V(()=>c("span",{class:"subtitle-1"},"Tidak ada file yang ditemukan",-1)),ge=V(()=>c("span",{class:"caption"},"Mohon periksa kembali nama file dan kategori",-1)),_e={class:"text-overline mb-1"},ye={class:"text-h6 mb-1"},ve={class:"text-caption"};function ke(a,s,i,d,o,u){return n(),C("div",null,[e(S,{class:"auth-card pa-4 pt-5"},{default:t(()=>[e(oe,{class:"text-2xl font-weight-bold"},{default:t(()=>[x(" Cari File ")]),_:1}),e(le,null,{default:t(()=>[e(ne,{onSubmit:W(u.searchFile,["prevent"])},{default:t(()=>[e(b,null,{default:t(()=>[e(p,{"no-gutters":""},{default:t(()=>[e(r,{cols:"12",sm:"6"},{default:t(()=>[e(k,{class:"ma-2 pa-2"},{default:t(()=>[e(ce,{placeholder:"Cari File",autofocus:"",modelValue:o.selectedName,"onUpdate:modelValue":s[0]||(s[0]=l=>o.selectedName=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"4"},{default:t(()=>[e(k,{class:"ma-2 pa-2"},{default:t(()=>[e(de,{label:"Pilih Kategori",items:o.categories,modelValue:o.selectedCategory,"onUpdate:modelValue":s[1]||(s[1]=l=>o.selectedCategory=l),variant:"solo-filled"},null,8,["items","modelValue"])]),_:1})]),_:1}),e(r,{cols:"12",sm:"2"},{default:t(()=>[e(k,{class:"ma-2 pa-2 d-flex justify-center"},{default:t(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-magnify",color:"#5865f2",type:"submit"})]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[o.items==null?(n(),m(r,{key:0,cols:"12",md:"12"},{default:t(()=>[e(p,{class:"text-center"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(X,{indeterminate:"",color:"primary"})]),_:1}),e(r,{cols:"12"},{default:t(()=>[he]),_:1})]),_:1})]),_:1})):y("",!0),o.items!=null&&o.items.length==0?(n(),m(r,{key:1,cols:"12",md:"12"},{default:t(()=>[e(p,{class:"text-center"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(Y,{size:"64",color:"grey lighten-2"},{default:t(()=>[x("mdi-folder-search-outline")]),_:1})]),_:1}),e(r,{cols:"12"},{default:t(()=>[pe]),_:1}),e(r,{cols:"12"},{default:t(()=>[ge]),_:1})]),_:1})]),_:1})):y("",!0),o.items!=null&&o.items.length>0?(n(!0),C(Z,{key:2},ee(o.items,(l,g)=>(n(),m(r,{key:g,cols:"12",md:"6"},{default:t(()=>[e(S,{class:"mx-auto card-style",color:"primary",variant:"tonal",height:"230px","max-width":"344",hover:""},{default:t(()=>[e(ue,{src:"https://bankarthaya.com/wp-content/uploads/2023/07/desktop-1024x576-1.jpg",height:"20px",cover:""}),e(re,null,{default:t(()=>[c("div",null,[c("div",_e,v(l.file.author.name),1),c("div",ye,v(l.file.name.substring(0,20)+"..."),1),c("div",ve,v(l.file.summary.substring(0,30)+"..."),1)])]),_:2},1024),e(ie,{class:"d-flex justify-end"},{default:t(()=>[e(h,{class:"ma-2",variant:"text",icon:"mdi-open-in-new",color:"blue-lighten-2",onClick:f=>u.toDetail(l.file.id)},null,8,["onClick"]),l.file.favorite?(n(),m(h,{key:0,class:"ma-2",variant:"text",icon:"mdi-heart",color:"blue-lighten-2",onClick:f=>u.favorite(l.file.id)},null,8,["onClick"])):(n(),m(h,{key:1,class:"ma-2",variant:"text",icon:"mdi-heart-outline",color:"blue-lighten-2",onClick:f=>u.favorite(l.file.id)},null,8,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}const Me=se(fe,[["render",ke],["__scopeId","data-v-446d94f0"]]);export{Me as default};
