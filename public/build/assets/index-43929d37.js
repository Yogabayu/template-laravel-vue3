import{m as u}from"./VAvatar-0e3794e8.js";import{r as D,o as p,c as C,a as t,w as s,e as r,b as i,V as c,d as v,h as _,t as g,i as b}from"./main-13669c19.js";import{_ as k}from"./_plugin-vue_export-helper-c27b6911.js";import{V as f,a as A,c as L}from"./VCard-7bbc64c9.js";import{V as h}from"./VTextField-c9912b03.js";import{V}from"./VDialog-e0694243.js";import{V as w}from"./VForm-d81e6643.js";import{V as y,a as m}from"./VRow-4da1e996.js";import{V as F}from"./VSelect-0487a22a.js";import{V as x}from"./VChip-5568f700.js";import"./VImg-be343280.js";import"./VCounter-33afe4c4.js";import"./index-d00cb414.js";import"./VOverlay-4a465866.js";import"./dialog-transition-89f9a8ec.js";import"./VMenu-f70ca5e3.js";const M={data(){return{rules:{required:a=>!!a||"Required"},dataForm:{id:null,name:"",approval_level_id:null},items:[],headers:[{text:"Nama Jabatan",value:"name",sortable:!0},{text:"Total Karyawan",value:"users_count",sortable:!0},{text:"Approval Draft",value:"approval_level",sortable:!0},{text:"Operation",value:"operation"}],searchValue:"",insert:!1,edit:!1,approvalLevels:[]}},methods:{getChipColor(a){switch(a){case 0:return console.log("Level 0"),"rgb(255, 153, 0)";case 1:return console.log("Level 1"),"rgb(229, 43, 43)";case 2:return console.log("Level 2"),"rgb(6, 84, 107)";case 3:return console.log("Level 3"),"rgb(150, 150, 150)";case 4:return console.log("Level 4"),"rgb(0, 0, 0)";default:return console.log("Level default"),"rgb(6, 84, 107)"}},async deletePosition(a){try{if(!window.confirm("Apakah Anda yakin ingin menghapus data?"))return;const n=await u.delete(`/position/${a.id}`);n.status===200?(this.getAllPositions(),this.$showToast("success","Berhasil",n.data.message)):this.$showToast("error","Sorry",n.data.message)}catch(e){this.$showToast("error","Sorry",e.response.data.message)}},async updateData(){try{const a=new FormData;a.append("name",this.dataForm.name),a.append("approval_level_id",this.dataForm.approval_level_id),a.append("_method","PUT");const e=await u.post(`/position/${this.dataForm.id}`,a);e.status===200?(this.closeModal(2),this.getAllPositions(),this.$showToast("success","Success",e.data.message)):this.$showToast("error","Sorry",e.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},async insertData(){try{for(let n in this.dataForm)n!=="id"&&this.dataForm[n]===null&&(this.closeModal(1),this.$showToast("error","Sorry",`Properti ${n} harus diisi.`));const a=new FormData;a.append("approval_level_id",this.dataForm.approval_level_id),a.append("name",this.dataForm.name),a.append("_method","POST");const e=await u.post("/position",a);e.status===200?(this.closeModal(1),this.getAllPositions(),this.$showToast("success","Success",e.data.message)):this.$showToast("error","Sorry",e.data.message)}catch(a){this.$showToast("error","Sorry",a.response.data.message)}},closeModal(a){a===1?(this.resetForm(),this.insert=!1):a===2&&(this.resetForm(),this.edit=!1)},resetForm(){this.dataForm={name:"",id:null,approval_level_id:1}},openModal(a,e=null){a===1?(this.insert=!0,this.getApprovalLevel()):a===2&&(e&&(this.dataForm.approval_level_id=parseInt(e.approval_level_id)?parseInt(e.approval_level_id):1,this.dataForm.name=e.name,this.dataForm.id=e.id,this.edit=!0),this.getApprovalLevel())},async getAllPositions(){try{const a=await u.get("/position");a.status===200?this.items=a.data.data:this.$showToast("error","Sorry",a.data.data.message)}catch(a){this.$showToast("error","Sorry",a.data.data.message)}},async getApprovalLevel(){try{const a=await u.get("/draft-approval-level");a.status===200?this.approvalLevels=a.data.data.map(e=>({value:e.id,title:e.name+"-"+e.desc})):this.$showToast("error","Sorry",a.data.data.message)}catch(a){this.$showToast("error","Sorry",a.data.data.message)}}},mounted(){this.getAllPositions()}},P={class:"d-flex justify-space-between mb-6"},U={class:"d-flex align-center pe-2 w-25"},B=i("p",null,"Data Jabatan Kosong",-1),N=i("p",null,"loading data .....",-1),q={class:"operation-wrapper"};function J(a,e,n,I,l,d){const T=D("EasyDataTable");return p(),C("div",null,[t(f,{class:"auth-card pa-4 pt-5"},{default:s(()=>[t(A,{class:"align-left"},{default:s(()=>[t(L,{class:"text-2xl font-weight-bold"},{default:s(()=>[r(" Daftar Jabatan ")]),_:1})]),_:1}),i("div",P,[t(c,{color:"primary",size:"small",class:"my-3 mx-3",onClick:e[0]||(e[0]=o=>d.openModal(1))},{default:s(()=>[r(" Tambah Data ")]),_:1}),i("div",U,[t(h,{"prepend-inner-icon":"mdi-magnify",density:"compact",label:"Search","single-line":"",flat:"","hide-details":"",variant:"solo-filled",modelValue:l.searchValue,"onUpdate:modelValue":e[1]||(e[1]=o=>l.searchValue=o)},null,8,["modelValue"])])]),t(V,{modelValue:l.insert,"onUpdate:modelValue":e[5]||(e[5]=o=>l.insert=o),width:"auto"},{default:s(()=>[t(f,null,{title:s(()=>[r(" Tambah Data ")]),text:s(()=>[t(w,{onSubmit:v(d.insertData,["prevent"])},{default:s(()=>[t(y,null,{default:s(()=>[t(m,{md:"12",cols:"12"},{default:s(()=>[t(h,{placeholder:"Nama Jabatan",label:"Nama",modelValue:l.dataForm.name,"onUpdate:modelValue":e[2]||(e[2]=o=>l.dataForm.name=o),autofocus:"",rules:[l.rules.required],"prepend-icon":"mdi-file"},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",md:"12"},{default:s(()=>[t(F,{label:"Approval Draft",items:l.approvalLevels,modelValue:l.dataForm.approval_level_id,"onUpdate:modelValue":e[3]||(e[3]=o=>l.dataForm.approval_level_id=o),rules:[l.rules.required],"prepend-icon":"mdi-divide"},null,8,["items","modelValue","rules"])]),_:1}),t(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[t(c,{type:"submit"},{default:s(()=>[r("Simpan")]),_:1}),i("button",{type:"button",class:"btn btn-blue",onClick:e[4]||(e[4]=o=>d.closeModal(1))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(V,{modelValue:l.edit,"onUpdate:modelValue":e[9]||(e[9]=o=>l.edit=o),width:"auto"},{default:s(()=>[t(f,null,{title:s(()=>[r(" Update Data ")]),text:s(()=>[t(w,{onSubmit:v(d.updateData,["prevent"])},{default:s(()=>[t(y,null,{default:s(()=>[t(m,{md:"12",cols:"12"},{default:s(()=>[t(h,{placeholder:"Nama Jabatan",label:"Nama",modelValue:l.dataForm.name,"onUpdate:modelValue":e[6]||(e[6]=o=>l.dataForm.name=o),autofocus:"",rules:[l.rules.required],"prepend-icon":"mdi-file"},null,8,["modelValue","rules"])]),_:1}),t(m,{cols:"12",md:"12"},{default:s(()=>[t(F,{label:"Approval Draft",items:l.approvalLevels,modelValue:l.dataForm.approval_level_id,"onUpdate:modelValue":e[7]||(e[7]=o=>l.dataForm.approval_level_id=o),rules:[l.rules.required],"prepend-icon":"mdi-divide"},null,8,["items","modelValue","rules"])]),_:1}),t(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[t(c,{type:"submit"},{default:s(()=>[r("Simpan")]),_:1}),i("button",{type:"button",class:"btn btn-blue",onClick:e[8]||(e[8]=o=>d.closeModal(2))}," Batal ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"]),t(T,{"show-index":"",headers:l.headers,items:l.items,"search-value":l.searchValue},{"empty-message":s(()=>[B]),loading:s(()=>[N]),"item-approval_level":s(({approval_level:o})=>[o!=null?(p(),_(x,{key:0},{default:s(()=>[r(g(o.name)+": "+g(o.desc),1)]),_:2},1024)):(p(),_(x,{key:1},{default:s(()=>[r("-")]),_:1}))]),"item-operation":s(o=>[i("div",q,[i("button",null,[t(b,{size:"20",icon:"bx-edit",color:"blue",onClick:S=>d.openModal(2,o)},null,8,["onClick"])]),r(" Â  "),i("button",null,[t(b,{size:"20",icon:"bx-trash",color:"red",onClick:S=>d.deletePosition(o)},null,8,["onClick"])])])]),_:1},8,["headers","items","search-value"])]),_:1})])}const te=k(M,[["render",J]]);export{te as default};
